<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>우부붸붸 번역기</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <nav>
            <h1>우부붸붸 번역기</h1>
            <h4>Plagiarized  by 5zaqws</h4> 
        </nav>

        <section>
            <input type="text" id="input" autocomplete="off">
            <br>
            <button onclick="ubwubwebweTranslate();">번역</button>
            <span id="output">결과: </span>
            <button onclick="copyToClipboard()">복사하기</button>
        </section>
    </main>

    <script>
        const keyMap = "오부붸엔예퉨웨욱벰베";
        const separateToken = "옌";
        const spaceToken = "우";

        function encode(text) {
            const result = [];
            for (const word of text.split(" ")) {
                const encodedWord = word
                .split("")
                .map((char) => char.charCodeAt().toString().split("").reverse().join(""))
                .join(separateToken)
                .replace(/\s/g, "")
                .split("")
                .map((char) => char === separateToken ? char : keyMap[parseInt(char)])
                .join("");
                result.push(encodedWord);
            }

            return result.join(spaceToken) + " 오사스";
        }

        function decode(text) {
            const result = [];
            if(text.length < 5) throw new Error("PPAP");
            for (const word of text.slice(0, -4).split(spaceToken)) {
                const decodedWord = word
                .split("")
                .map((char) => char === separateToken ? char : indexOfError(keyMap, char).toString())
                .join("")
                .split(separateToken)
                .filter((char) => char)
                .map((char) => String.fromCharCode(parseInt(char.split("").reverse().join(""))))
                .join("");
                result.push(decodedWord);
            }

            return result.join(" ");
        }


        function indexOfError(text, target){
            let index = text.indexOf(target);
            if(index == -1) throw new Error("SANS");
            return index;
        }


        function ubwubwebweTranslate(){
            let input = document.getElementById("input");
            let output = document.getElementById("output");
            let result;

            try{
                result = decode(input.value);
            } catch(e){
                result = encode(input.value);
            } finally{
                output.innerHTML = `결과: ${result}`;
            }
        }

        function copyToClipboard() {
            var output = document.getElementById("output");
            navigator.clipboard.writeText(output.innerHTML.slice(4));

            alert("Copied the text: " + copyText.value);
        }

        input.addEventListener("keydown", function(e){
            if (e.key == "Enter"){
                ubwubwebweTranslate();
            }
        });
    </script>
</body>
</html>
